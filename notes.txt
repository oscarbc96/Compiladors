implementar cortcircuit
implementar condicions per a calc mode